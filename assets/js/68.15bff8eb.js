(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{117:function(s,a,t){"use strict";t.r(a);var e=t(0),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vpn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vpn"}},[s._v("#")]),s._v(" VPN")]),s._v(" "),t("p",[s._v("VPN英文全称是 "),t("code",[s._v("Virtual Private Network")]),s._v("，翻译过来就是 "),t("code",[s._v("虚拟专用网络")]),s._v("。搭建一个VPN服务器，连接上这个VPN相当于进入这台VPN服务器所在的局域网，具备了和VPN服务器同等访问网络资源的权限。")]),s._v(" "),t("h2",{attrs:{id:"搭建vpn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建vpn"}},[s._v("#")]),s._v(" 搭建VPN")]),s._v(" "),t("p",[s._v("参考文档 "),t("a",{attrs:{href:"https://github.com/hwdsl2/setup-ipsec-vpn",target:"_blank",rel:"noopener noreferrer"}},[s._v("IPsec VPN Server Auto Setup Scripts"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("以下脚本在 "),t("code",[s._v("Ubuntu")]),s._v(" 上通过。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r ./create-credentials.sh codedocs-vpn:/tmp\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scripts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n    cd /tmp\n\n    wget https://git.io/vpnsetup -O vpnsetup.sh\n    bash vpnsetup.sh\n\n    bash create-credentials.sh wenbinke\n\n    rm -rfv /tmp/*\nEOF")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" codedocs-vpn -t "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"sudo sh -c '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$scripts")]),s._v("'\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行后会在Console打印出VPN_IPSEC_PSK。")]),s._v("\n")])])]),t("ul",[t("li",[t("p",[t("code",[s._v("ssh codedocs-vpn")]),s._v(" 参考 "),t("RouterLink",{attrs:{to:"/zh/ssh.html"}},[s._v("SSH")]),s._v("。")],1)]),s._v(" "),t("li",[t("p",[s._v("以下为 "),t("code",[s._v("create-credentials.sh")]),s._v(" 源码。用于创建VPN账号。")])])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vpn_user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vpn_password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -z "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_password")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vpn_password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LC_CTYPE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" -dc "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A-HJ-NPR-Za-km-z2-9'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" /dev/urandom "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_password")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/ppp/chap-secrets "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\n"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_user")]),s._v('" l2tpd "'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_password")]),s._v('" *\nEOF')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vpn_password_enc")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("openssl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" -1 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_password")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/ipsec.d/passwd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_user")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$vpn_password_enc")]),s._v(":xauth-psk\nEOF")]),s._v("\n")])])]),t("h2",{attrs:{id:"连接vpn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接vpn"}},[s._v("#")]),s._v(" 连接VPN")]),s._v(" "),t("p",[s._v("MacOS 下点击网络设置新增VPN网络。配置如下信息即可。")]),s._v(" "),t("p",[t("code",[s._v("Send all trafic over VPN connection")]),s._v(" 需勾选。")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("VPN Type: L2TP over IPSec\nServer Address: <VPN_HOST>\nShared Secret: <VPN_IPSEC_PSK>\nUsername: <USERNAME>\nPassword: <PASSWORD>\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);